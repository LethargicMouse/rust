extern fn InitWindow(i32, i32, cstr);
extern fn SetTargetFPS(i32);
extern fn WindowShouldClose() bool;
extern fn CloseWindow();
extern fn BeginDrawing();
extern fn ClearBackground(color);
extern fn DrawText(cstr, i32, i32, i32, color);
extern fn EndDrawing();
extern fn MeasureText(cstr, i32) i32;

struct arr<t> {
  ptr: *t,
  len: size
}

type size = u64;

type cstr = *u8;

struct color { r: u8, g: u8, b: u8, a: u8 }

let black: color = color {r: 0, g: 0, b: 0, a: 255};
let lightgray: color = color {r: 200, g: 200, b: 200, a: 255};

fn main() {
  let width = 800;
  let height = 600;
  InitWindow(width, height, "test window".ptr);
  SetTargetFPS(60);
  loop {
    if WindowShouldClose() {
      CloseWindow();
      return;
    }
    BeginDrawing();
    ClearBackground(black);
    let text = "Graphics test".ptr;
    let font_size = 80;
    let text_len = MeasureText(text, font_size);
    DrawText(text, (width - text_len) / 2, (height - font_size) / 2, font_size, lightgray);
    EndDrawing();
  }
}

